import { WindowState } from '../../types'; export class Compositor { private wins = new Map<string, WindowState>(); registerWindow(w: WindowState) { this.wins.set(w.id, w); } unregisterWindow(id: string) { this.wins.delete(id); } updateWindow(id: string, u: Partial<WindowState>) { const w = this.wins.get(id); if (w) this.wins.set(id, { ...w, ...u }); } bringToFront(id: string) { const w = this.wins.get(id); if (w) { w.zIndex = Date.now(); this.wins.set(id, { ...w }); } } getAllWindows() { return Array.from(this.wins.values()).sort((a,b)=>a.zIndex-b.zIndex); } }